<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - DORMAUBI</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <nav>
        <div class="container navbar">
            <div class="logo">DORMA<span>UBI</span></div>
            <ul class="nav-links">
                <li><a href="index.html">Beranda</a></li>
                <li><a href="index.html#products">Produk</a></li>
            </ul>
        </div>
    </nav>

    <section class="container section">
        <div class="title-center">
            <h2>Halaman <span>Checkout</span></h2>
        </div>

        <div id="checkout-container" style="display: none;">
            <div style="display: flex; gap: 30px; flex-wrap: wrap;">
                
                <div style="flex: 1; min-width: 300px; background: #fff; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.05);">
                    <h3><i class="fas fa-receipt"></i> Ringkasan Pesanan</h3>
                    <hr style="margin: 15px 0; border: 0.5px solid #eee;">
                    <p><strong>Produk:</strong> <span id="display-nama"></span></p>
                    <p><strong>Harga Satuan:</strong> Rp <span id="display-harga"></span></p>
                    <p><strong>Jumlah:</strong> <span id="display-qty"></span> pcs</p>
                    <hr style="margin: 15px 0; border: 0.5px solid #eee;">
                    <h4 style="color: var(--primary);">Total Bayar: Rp <span id="display-total"></span></h4>
                </div>

                <div style="flex: 1; min-width: 300px; background: #fff; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.05);">
                    <h3><i class="fas fa-user-edit"></i> Data Pemesan</h3>
                    <form id="formCheckout">
                        <div style="margin: 10px 0;">
                            <label>Nama Lengkap:</label><br>
                            <input type="text" id="nama_pembeli" required style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ddd;">
                        </div>
                        <div style="margin: 10px 0;">
                            <label>Alamat Lengkap:</label><br>
                            <textarea id="alamat" required style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ddd;"></textarea>
                        </div>
                        <div style="margin: 10px 0;">
                            <label>Metode Pembayaran:</label><br>
                            <select id="pembayaran" style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ddd;">
                                <option value="Transfer Bank (BCA/Mandiri)">Transfer Bank</option>
                                <option value="E-Wallet (OVO/Dana/GoPay)">E-Wallet</option>
                                <option value="COD (Bayar di Tempat)">COD (Area Tertentu)</option>
                            </select>
                        </div>
                        <button type="button" onclick="kirimWhatsApp()" class="btn-buy" style="margin-top: 20px; width: 100%;">
                            Konfirmasi & Bayar via WA
                        </button>
                    </form>
                </div>

            </div>
        </div>

        <div id="empty-cart" style="text-align: center; padding: 50px;">
            <p>Keranjang masih kosong. Silakan pilih produk terlebih dahulu.</p>
            <a href="index.html" class="btn-primary">Kembali Belanja</a>
        </div>
    </section>

    <footer style="margin-top: 50px; background: #2d3436; color: white; padding: 40px 0; text-align: center;">
        <p>&copy; 2024 Rugun Dormavita Silalahi. All Rights Reserved.</p>
    </footer>

    <script>
        // Ambil data dari LocalStorage yang dikirim dari index.html
        const cartData = JSON.parse(localStorage.getItem('dormaubi_cart'));

        if (cartData) {
            // Tampilkan container checkout
            document.getElementById('checkout-container').style.display = 'block';
            document.getElementById('empty-cart').style.display = 'none';

            // Isi data ringkasan
            document.getElementById('display-nama').innerText = cartData.nama;
            document.getElementById('display-harga').innerText = Number(cartData.harga).toLocaleString('id-ID');
            document.getElementById('display-qty').innerText = cartData.qty;
            document.getElementById('display-total').innerText = (cartData.harga * cartData.qty).toLocaleString('id-ID');
        }

        function kirimWhatsApp() {
            const pembeli = document.getElementById('nama_pembeli').value;
            const alamat = document.getElementById('alamat').value;
            const metode = document.getElementById('pembayaran').value;

            if (pembeli === "" || alamat === "") {
                alert("Harap isi data diri lengkap!");
                return;
            }

            const noWA = "6282289259620";
            const pesan = "*PESANAN BARU DORMAUBI*%0A" +
                "----------------------------------%0A" +
                "*Produk:* " + cartData.nama + "%0A" +
                "*Jumlah:* " + cartData.qty + " pcs%0A" +
                "*Total Harga:* Rp " + (cartData.harga * cartData.qty).toLocaleString('id-ID') + "%0A" +
                "----------------------------------%0A" +
                "*Data Pembeli*%0A" +
                "*Nama:* " + pembeli + "%0A" +
                "*Alamat:* " + alamat + "%0A" +
                "*Metode Bayar:* " + metode + "%0A%0A" +
                "Mohon segera diproses ya Min!";

            window.open("https://wa.me/" + noWA + "?text=" + pesan, '_blank');
        }
    </script>
</body>
</html>